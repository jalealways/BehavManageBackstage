"use strict";angular.module("managementApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]).config(["$httpProvider",function(a){a.defaults.withCredentials=!0}]),angular.module("managementApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("managementApp").controller("AboutCtrl",["resource",function(a){var b=this;b.unfold=function(a){var c=a.target.parentNode.nextElementSibling;c.classList.contains("active")?c.classList.remove("active"):(c.classList.add("active"),console.log(b.list))},b.selectAll=function(a,b){1===b?angular.forEach(a,function(a){a.isdisplay=1}):angular.forEach(a,function(a){a.isdisplay=0})},b.getList=function(){a.getList.get(function(a){console.log(a),b.list=a.result})},b.getList(),b.submit=function(){b.data={projectName:b.projectName,list:b.list},a.create.save({},b.data,function(a){console.log(a),alert("方案保存成功"),window.reload()})}}]),angular.module("managementApp").service("resource",["$resource","apiAddress",function(a,b){var c=a(b+"/manage/display_list"),d=a(b+"/loginPost"),e=a(b+"/manage/create_role");return{getList:c,login:d,create:e}}]),angular.module("managementApp").constant("apiAddress",/^http\:\/\/localhost/.test(window.location.href)?"http://localhost:8012/":"http://10.10.3.214:8012/"),angular.module("managementApp").directive("contenteditable",["$sce",function(a){return{require:"ngModel",link:function(a,b,c,d){b.html(a.data.display_name_chs),c.$set("contenteditable",!1),d.render=function(a){b.html(a)},d.$setViewValue(b.html()),b.bind("dblclick",function(a){a.stopPropagation(),c.contenteditable||(c.$set("contenteditable",!0),b[0].focus())}),b.bind("blur",function(){c.$set("contenteditable",!1),a.$apply(function(){d.$setViewValue(b.html())})}),b.bind("keydown",function(a){var c=27===a.which,d=13===a.which;(c||d)&&(a.preventDefault(),b[0].blur())})}}}]),angular.module("managementApp").directive("childcontent",["$sce",function(a){return{require:"ngModel",link:function(a,b,c,d){b.html(a.about.list[a.$parent.$index].child[a.$index].display_name_chs),c.$set("contenteditable",!1),d.render=function(a){b.html(a)},d.$setViewValue(b.html()),b.bind("dblclick",function(){c.contenteditable||(c.$set("contenteditable",!0),b[0].focus())}),b.bind("blur",function(){c.$set("contenteditable",!1),a.$apply(function(){d.$setViewValue(b.html())})}),b.bind("keydown",function(a){var c=27===a.which,d=13===a.which;(c||d)&&(a.preventDefault(),b[0].blur())})}}}]),angular.module("managementApp").run(["$templateCache",function(a){a.put("views/about.html",'<div class="container col-md-12"> <div class="about-header col-md-12"> 系统模块选择 </div> <div class="about-body col-md-12"> <form class="flex-box" ng-submit="about.submit()"> <div> <p>请输入项目名称：</p> <p>请选择分析模块：</p> </div> <div> <p><input placeholder="请在此输入项目名称" required ng-model="about.projectName"></p> <div class="data-list" ng-repeat="data in about.list"> <div> <input id="{{data.display_name}}" type="checkbox" ng-model="data.isdisplay" ng-true-value="1" ng-false-value="0" ng-click="about.selectAll(data.child,data.isdisplay)"> <label for="{{data.display_name}}"></label><span ng-click="about.unfold($event)" ng-model="data.display_name_chs" ng-bind="data.display_name_chs" contenteditable></span> </div> <div class="data-child"> <div ng-repeat="child in data.child"> <input type="checkbox" id="{{child.display_name}}" ng-model="child.isdisplay" ng-true-value="1" ng-false-value="0"> <label for="{{child.display_name}}"></label><span ng-model="child.display_name_chs" childcontent>{{child.display_name_chs}}</span> </div> </div> </div> <p> <button type="submit">确定</button> </p> </div> </form> </div> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.c582c4d1.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>')}]);